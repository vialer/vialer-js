
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Source: src/js/observer/parsers/dutch.js | Vialer-js</title>
    <link type="text/css" rel="stylesheet" href="styles/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">

    
</head>
<body>

    <nav class="navigation-sidebar-container">
        <div class="navigation-sidebar">

            <input type="checkbox" id="nav-trigger" class="nav-trigger">
            <label for="nav-trigger" class="navicon-button x">
              <div class="navicon"></div>
            </label>
            <label for="nav-trigger" class="overlay"></label>
            
            <div class="nav-search js-search">
                <a class="nav-project-title" href="index.html" class="link">
                    <div class="logo" style="width: 72px; height: 72px">
                        <img src="logo-64.png" width="100%" height="100%">
                    </div>
                </a>
                <div class="nav-title">
                    <h1>Vialer-js</h1>
                    <span class="version">
                    
                        v3.0.91
                    
                    </span>
                </div>
                <input type="text" placeholder="Search documentation...">
                <ul class="searched-list"></ul>
            </div>

            
            <div class="nav-doc-type">
                <div class="nav-doc-item" id="manuals-tab">
                    <a href="./">Getting started</a>
                </div>
                <div class="nav-doc-item" id="api-tab">
                    <a href="#api">Explore code</a>
                </div>
            </div>
            

            <div class="nav-scroll-container"><div class="nav-manuals hidden"><h3>Getting started</h3><ul class="nav-items"><li class="nav-item tutorial install">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="tutorial-install.html">1. Installation</a>
                <div class="nav-item-sub hidden" id="install_sub"></div>
            </li><li class="nav-item tutorial development">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="tutorial-development.html">2. Code development</a>
                <div class="nav-item-sub hidden" id="development_sub"></div>
            </li><li class="nav-item tutorial branding">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="tutorial-branding.html">3. Create a brand</a>
                <div class="nav-item-sub hidden" id="branding_sub"></div>
            </li><li class="nav-item tutorial deployment">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="tutorial-deployment.html">4. Automate deployments</a>
                <div class="nav-item-sub hidden" id="deployment_sub"></div>
            </li></ul></div><div class="nav-api hidden"><h3>Modules</h3><ul class="nav-items"><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleApp.html">ModuleApp</a>
                <div class="nav-item-sub hidden" id="module_ModuleApp_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleAvailability.html">ModuleAvailability</a>
                <div class="nav-item-sub hidden" id="module_ModuleAvailability_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleCalls.html">ModuleCalls</a>
                <div class="nav-item-sub hidden" id="module_ModuleCalls_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleContacts.html">ModuleContacts</a>
                <div class="nav-item-sub hidden" id="module_ModuleContacts_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleExtension.html">ModuleExtension</a>
                <div class="nav-item-sub hidden" id="module_ModuleExtension_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleQueues.html">ModuleQueues</a>
                <div class="nav-item-sub hidden" id="module_ModuleQueues_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleSettings.html">ModuleSettings</a>
                <div class="nav-item-sub hidden" id="module_ModuleSettings_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleUI.html">ModuleUI</a>
                <div class="nav-item-sub hidden" id="module_ModuleUI_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleUser.html">ModuleUser</a>
                <div class="nav-item-sub hidden" id="module_ModuleUser_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-Sounds.html">Sounds</a>
                <div class="nav-item-sub hidden" id="module_Sounds_sub"><div class="member-type">Members</div><ul class="inner"><li class="sub-nav-item context"><a href="module-Sounds.html#~context">context</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-env.html">env</a>
                <div class="nav-item-sub hidden" id="module_env_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item env"><a href="module-env.html#~env">env</a></a></li></ul></div>
            </li></ul></div><div class="nav-api hidden"><h3>Namespaces</h3><ul class="nav-items"><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.html">AppBackground</a>
                <div class="nav-item-sub hidden" id="AppBackground_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppForeground.html">AppForeground</a>
                <div class="nav-item-sub hidden" id="AppForeground_sub"><div class="member-type">Members</div><ul class="inner"><li class="sub-nav-item env"><a href="AppForeground.html#env">env</a></a></li><li class="sub-nav-item modules"><a href="AppForeground.html#modules">modules</a></a></li><li class="sub-nav-item sounds"><a href="AppForeground.html#sounds">sounds</a></a></li></ul><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __initStore"><a href="AppForeground.html#__initStore">__initStore</a></a></li><li class="sub-nav-item __isObject"><a href="AppForeground.html#__isObject">__isObject</a></a></li><li class="sub-nav-item __mergeDeep"><a href="AppForeground.html#__mergeDeep">__mergeDeep</a></a></li><li class="sub-nav-item __mergeState"><a href="AppForeground.html#__mergeState">__mergeState</a></a></li><li class="sub-nav-item __setFromPath"><a href="AppForeground.html#__setFromPath">__setFromPath</a></a></li><li class="sub-nav-item _initialState"><a href="AppForeground.html#_initialState">_initialState</a></a></li><li class="sub-nav-item initI18n"><a href="AppForeground.html#initI18n">initI18n</a></a></li><li class="sub-nav-item initViewModel"><a href="AppForeground.html#initViewModel">initViewModel</a></a></li><li class="sub-nav-item setState"><a href="AppForeground.html#setState">setState</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppTab.html">AppTab</a>
                <div class="nav-item-sub hidden" id="AppTab_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item createNumberIconElement"><a href="AppTab.html#createNumberIconElement">createNumberIconElement</a></a></li><li class="sub-nav-item escapeHTML"><a href="AppTab.html#escapeHTML">escapeHTML</a></a></li><li class="sub-nav-item handleMutations"><a href="AppTab.html#handleMutations">handleMutations</a></a></li><li class="sub-nav-item insertIconInDom"><a href="AppTab.html#insertIconInDom">insertIconInDom</a></a></li><li class="sub-nav-item observePage"><a href="AppTab.html#observePage">observePage</a></a></li><li class="sub-nav-item processPage"><a href="AppTab.html#processPage">processPage</a></a></li><li class="sub-nav-item revertInsertedIcons"><a href="AppTab.html#revertInsertedIcons">revertInsertedIcons</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppForeground.components.html">AppForeground.components</a>
                <div class="nav-item-sub hidden" id="AppForeground_components_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.html">AppBackground.modules</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_sub"></div>
            </li></ul></div><div class="nav-api hidden"><h3>Classes</h3><ul class="nav-items"><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Api.html">Api</a>
                <div class="nav-item-sub hidden" id="Api_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item setupClient"><a href="Api.html#setupClient">setupClient</a></a></li><li class="sub-nav-item toString"><a href="Api.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="App.html">App</a>
                <div class="nav-item-sub hidden" id="App_sub"><div class="member-type">Members</div><ul class="inner"><li class="sub-nav-item env"><a href="App.html#env">env</a></a></li><li class="sub-nav-item modules"><a href="App.html#modules">modules</a></a></li><li class="sub-nav-item sounds"><a href="App.html#sounds">sounds</a></a></li><li class="sub-nav-item this.state"><a href="App.html#.this.state">this.state</a></a></li></ul><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __initStore"><a href="App.html#__initStore">__initStore</a></a></li><li class="sub-nav-item __isObject"><a href="App.html#__isObject">__isObject</a></a></li><li class="sub-nav-item __mergeDeep"><a href="App.html#__mergeDeep">__mergeDeep</a></a></li><li class="sub-nav-item __mergeState"><a href="App.html#__mergeState">__mergeState</a></a></li><li class="sub-nav-item __setFromPath"><a href="App.html#__setFromPath">__setFromPath</a></a></li><li class="sub-nav-item _initialState"><a href="App.html#_initialState">_initialState</a></a></li><li class="sub-nav-item helpers"><a href="App.html#.helpers">helpers</a></a></li><li class="sub-nav-item initI18n"><a href="App.html#initI18n">initI18n</a></a></li><li class="sub-nav-item initViewModel"><a href="App.html#initViewModel">initViewModel</a></a></li><li class="sub-nav-item setState"><a href="App.html#setState">setState</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="app.AppBackground.html">AppBackground</a>
                <div class="nav-item-sub hidden" id="app_AppBackground_sub"><div class="member-type">Members</div><ul class="inner"><li class="sub-nav-item store"><a href="app.AppBackground.html#store">store</a></a></li></ul><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __factoryDefaults"><a href="app.AppBackground.html#__factoryDefaults">__factoryDefaults</a></a></li><li class="sub-nav-item __initServices"><a href="app.AppBackground.html#__initServices">__initServices</a></a></li><li class="sub-nav-item __initStore"><a href="app.AppBackground.html#__initStore">__initStore</a></a></li><li class="sub-nav-item __logoutState"><a href="app.AppBackground.html#__logoutState">__logoutState</a></a></li><li class="sub-nav-item __mergeState"><a href="app.AppBackground.html#__mergeState">__mergeState</a></a></li><li class="sub-nav-item __unlockVault"><a href="app.AppBackground.html#__unlockVault">__unlockVault</a></a></li><li class="sub-nav-item _platformData"><a href="app.AppBackground.html#_platformData">_platformData</a></a></li><li class="sub-nav-item _restoreState"><a href="app.AppBackground.html#_restoreState">_restoreState</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppElectron.html">AppElectron</a>
                <div class="nav-item-sub hidden" id="AppElectron_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppForeground.html">AppForeground</a>
                <div class="nav-item-sub hidden" id="AppForeground_sub"><div class="member-type">Members</div><ul class="inner"><li class="sub-nav-item env"><a href="AppForeground.html#env">env</a></a></li><li class="sub-nav-item modules"><a href="AppForeground.html#modules">modules</a></a></li><li class="sub-nav-item sounds"><a href="AppForeground.html#sounds">sounds</a></a></li></ul><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __initStore"><a href="AppForeground.html#__initStore">__initStore</a></a></li><li class="sub-nav-item __isObject"><a href="AppForeground.html#__isObject">__isObject</a></a></li><li class="sub-nav-item __mergeDeep"><a href="AppForeground.html#__mergeDeep">__mergeDeep</a></a></li><li class="sub-nav-item __mergeState"><a href="AppForeground.html#__mergeState">__mergeState</a></a></li><li class="sub-nav-item __setFromPath"><a href="AppForeground.html#__setFromPath">__setFromPath</a></a></li><li class="sub-nav-item _initialState"><a href="AppForeground.html#_initialState">_initialState</a></a></li><li class="sub-nav-item initI18n"><a href="AppForeground.html#initI18n">initI18n</a></a></li><li class="sub-nav-item initViewModel"><a href="AppForeground.html#initViewModel">initViewModel</a></a></li><li class="sub-nav-item setState"><a href="AppForeground.html#setState">setState</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppTab.html">AppTab</a>
                <div class="nav-item-sub hidden" id="AppTab_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item createNumberIconElement"><a href="AppTab.html#createNumberIconElement">createNumberIconElement</a></a></li><li class="sub-nav-item escapeHTML"><a href="AppTab.html#escapeHTML">escapeHTML</a></a></li><li class="sub-nav-item handleMutations"><a href="AppTab.html#handleMutations">handleMutations</a></a></li><li class="sub-nav-item insertIconInDom"><a href="AppTab.html#insertIconInDom">insertIconInDom</a></a></li><li class="sub-nav-item observePage"><a href="AppTab.html#observePage">observePage</a></a></li><li class="sub-nav-item processPage"><a href="AppTab.html#processPage">processPage</a></a></li><li class="sub-nav-item revertInsertedIcons"><a href="AppTab.html#revertInsertedIcons">revertInsertedIcons</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-Sounds-BusyTone.html">BusyTone</a>
                <div class="nav-item-sub hidden" id="module_Sounds_BusyTone_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleCalls-Call.html">Call</a>
                <div class="nav-item-sub hidden" id="module_ModuleCalls_Call_sub"><div class="member-type">Members</div><ul class="inner"><li class="sub-nav-item state"><a href="module-ModuleCalls-Call.html#state">state</a></a></li></ul><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _incoming"><a href="module-ModuleCalls-Call.html#_incoming">_incoming</a></a></li><li class="sub-nav-item _initMedia"><a href="module-ModuleCalls-Call.html#_initMedia">_initMedia</a></a></li><li class="sub-nav-item _outgoing"><a href="module-ModuleCalls-Call.html#_outgoing">_outgoing</a></a></li><li class="sub-nav-item _start"><a href="module-ModuleCalls-Call.html#_start">_start</a></a></li><li class="sub-nav-item _stop"><a href="module-ModuleCalls-Call.html#_stop">_stop</a></a></li><li class="sub-nav-item generateUUID"><a href="module-ModuleCalls-Call.html#generateUUID">generateUUID</a></a></li><li class="sub-nav-item setState"><a href="module-ModuleCalls-Call.html#setState">setState</a></a></li><li class="sub-nav-item toString"><a href="module-ModuleCalls-Call.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleCalls-CallConnectAB.html">CallConnectAB</a>
                <div class="nav-item-sub hidden" id="module_ModuleCalls_CallConnectAB_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _callStatus"><a href="module-ModuleCalls-CallConnectAB.html#_callStatus">_callStatus</a></a></li><li class="sub-nav-item hold"><a href="module-ModuleCalls-CallConnectAB.html#hold">hold</a></a></li><li class="sub-nav-item unhold"><a href="module-ModuleCalls-CallConnectAB.html#unhold">unhold</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleCalls-CallSIP.html">CallSIP</a>
                <div class="nav-item-sub hidden" id="module_ModuleCalls_CallSIP_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _incoming"><a href="module-ModuleCalls-CallSIP.html#_incoming">_incoming</a></a></li><li class="sub-nav-item _outgoing"><a href="module-ModuleCalls-CallSIP.html#_outgoing">_outgoing</a></a></li><li class="sub-nav-item accept"><a href="module-ModuleCalls-CallSIP.html#accept">accept</a></a></li><li class="sub-nav-item terminate"><a href="module-ModuleCalls-CallSIP.html#terminate">terminate</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleContacts-Contact.html">Contact</a>
                <div class="nav-item-sub hidden" id="module_ModuleContacts_Contact_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item setState"><a href="module-ModuleContacts-Contact.html#setState">setState</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleContacts-ContactSip.html">ContactSip</a>
                <div class="nav-item-sub hidden" id="module_ModuleContacts_ContactSip_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Crypto.html">Crypto</a>
                <div class="nav-item-sub hidden" id="Crypto_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __base64ToDataArray"><a href="Crypto.html#__base64ToDataArray">__base64ToDataArray</a></a></li><li class="sub-nav-item __dataArray"><a href="Crypto.html#__dataArray">__dataArray</a></a></li><li class="sub-nav-item __dataArrayToBase64"><a href="Crypto.html#__dataArrayToBase64">__dataArrayToBase64</a></a></li><li class="sub-nav-item __dataArrayToHex"><a href="Crypto.html#__dataArrayToHex">__dataArrayToHex</a></a></li><li class="sub-nav-item __dataArrayToString"><a href="Crypto.html#__dataArrayToString">__dataArrayToString</a></a></li><li class="sub-nav-item __deriveAESKeyFromECDH"><a href="Crypto.html#__deriveAESKeyFromECDH">__deriveAESKeyFromECDH</a></a></li><li class="sub-nav-item __exportAESKey"><a href="Crypto.html#__exportAESKey">__exportAESKey</a></a></li><li class="sub-nav-item __exportPrivateKey"><a href="Crypto.html#__exportPrivateKey">__exportPrivateKey</a></a></li><li class="sub-nav-item __exportPublicKey"><a href="Crypto.html#__exportPublicKey">__exportPublicKey</a></a></li><li class="sub-nav-item __hashString"><a href="Crypto.html#__hashString">__hashString</a></a></li><li class="sub-nav-item __importPrivateKey"><a href="Crypto.html#__importPrivateKey">__importPrivateKey</a></a></li><li class="sub-nav-item __importPublicKey"><a href="Crypto.html#__importPublicKey">__importPublicKey</a></a></li><li class="sub-nav-item __stringToDataArray"><a href="Crypto.html#__stringToDataArray">__stringToDataArray</a></a></li><li class="sub-nav-item _generateVaultKey"><a href="Crypto.html#_generateVaultKey">_generateVaultKey</a></a></li><li class="sub-nav-item _importVaultKey"><a href="Crypto.html#_importVaultKey">_importVaultKey</a></a></li><li class="sub-nav-item decrypt"><a href="Crypto.html#decrypt">decrypt</a></a></li><li class="sub-nav-item encrypt"><a href="Crypto.html#encrypt">encrypt</a></a></li><li class="sub-nav-item loadIdentity"><a href="Crypto.html#loadIdentity">loadIdentity</a></a></li><li class="sub-nav-item storeVault"><a href="Crypto.html#storeVault">storeVault</a></a></li><li class="sub-nav-item toString"><a href="Crypto.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-Sounds-DtmfTone.html">DtmfTone</a>
                <div class="nav-item-sub hidden" id="module_Sounds_DtmfTone_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Gulp.Helpers.html">Helpers</a>
                <div class="nav-item-sub hidden" id="Gulp_Helpers_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item deploy"><a href="Gulp.Helpers.html#deploy">deploy</a></a></li><li class="sub-nav-item distributionName"><a href="Gulp.Helpers.html#distributionName">distributionName</a></a></li><li class="sub-nav-item formatScssVars"><a href="Gulp.Helpers.html#formatScssVars">formatScssVars</a></a></li><li class="sub-nav-item getManifest"><a href="Gulp.Helpers.html#getManifest">getManifest</a></a></li><li class="sub-nav-item jsEntry"><a href="Gulp.Helpers.html#jsEntry">jsEntry</a></a></li><li class="sub-nav-item scssEntry"><a href="Gulp.Helpers.html#scssEntry">scssEntry</a></a></li><li class="sub-nav-item startDevServer"><a href="Gulp.Helpers.html#startDevServer">startDevServer</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="lib.Logger.html">Logger</a>
                <div class="nav-item-sub hidden" id="lib_Logger_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="MemoryStore.html">MemoryStore</a>
                <div class="nav-item-sub hidden" id="MemoryStore_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Module.html">Module</a>
                <div class="nav-item-sub hidden" id="Module_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleApp.html">ModuleApp</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleApp_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleApp.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _restoreState"><a href="AppBackground.modules.ModuleApp.html#_restoreState">_restoreState</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleAvailability.html">ModuleAvailability</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleAvailability_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleAvailability.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _platformData"><a href="AppBackground.modules.ModuleAvailability.html#_platformData">_platformData</a></a></li><li class="sub-nav-item _watchers"><a href="AppBackground.modules.ModuleAvailability.html#_watchers">_watchers</a></a></li><li class="sub-nav-item toString"><a href="AppBackground.modules.ModuleAvailability.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleCalls.html">ModuleCalls</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleCalls_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __setTransferState"><a href="AppBackground.modules.ModuleCalls.html#__setTransferState">__setTransferState</a></a></li><li class="sub-nav-item __uaOptions"><a href="AppBackground.modules.ModuleCalls.html#__uaOptions">__uaOptions</a></a></li><li class="sub-nav-item _emptyCall"><a href="AppBackground.modules.ModuleCalls.html#_emptyCall">_emptyCall</a></a></li><li class="sub-nav-item _formatSdp"><a href="AppBackground.modules.ModuleCalls.html#_formatSdp">_formatSdp</a></a></li><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleCalls.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _restoreState"><a href="AppBackground.modules.ModuleCalls.html#_restoreState">_restoreState</a></a></li><li class="sub-nav-item _userAgent"><a href="AppBackground.modules.ModuleCalls.html#_userAgent">_userAgent</a></a></li><li class="sub-nav-item activateCall"><a href="AppBackground.modules.ModuleCalls.html#activateCall">activateCall</a></a></li><li class="sub-nav-item activeCall"><a href="AppBackground.modules.ModuleCalls.html#activeCall">activeCall</a></a></li><li class="sub-nav-item callAction"><a href="AppBackground.modules.ModuleCalls.html#callAction">callAction</a></a></li><li class="sub-nav-item connect"><a href="AppBackground.modules.ModuleCalls.html#connect">connect</a></a></li><li class="sub-nav-item deleteCall"><a href="AppBackground.modules.ModuleCalls.html#deleteCall">deleteCall</a></a></li><li class="sub-nav-item disconnect"><a href="AppBackground.modules.ModuleCalls.html#disconnect">disconnect</a></a></li><li class="sub-nav-item toString"><a href="AppBackground.modules.ModuleCalls.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleContacts.html">ModuleContacts</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleContacts_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleContacts.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _platformData"><a href="AppBackground.modules.ModuleContacts.html#_platformData">_platformData</a></a></li><li class="sub-nav-item _restoreState"><a href="AppBackground.modules.ModuleContacts.html#_restoreState">_restoreState</a></a></li><li class="sub-nav-item toString"><a href="AppBackground.modules.ModuleContacts.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleExtension.html">ModuleExtension</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleExtension_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _installUpdate"><a href="AppBackground.modules.ModuleExtension.html#_installUpdate">_installUpdate</a></a></li><li class="sub-nav-item _keyboardShortcuts"><a href="AppBackground.modules.ModuleExtension.html#_keyboardShortcuts">_keyboardShortcuts</a></a></li><li class="sub-nav-item _ready"><a href="AppBackground.modules.ModuleExtension.html#_ready">_ready</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleQueues.html">ModuleQueues</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleQueues_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleQueues.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _onPopupAction"><a href="AppBackground.modules.ModuleQueues.html#_onPopupAction">_onPopupAction</a></a></li><li class="sub-nav-item _platformData"><a href="AppBackground.modules.ModuleQueues.html#_platformData">_platformData</a></a></li><li class="sub-nav-item queueMenubarIcon"><a href="AppBackground.modules.ModuleQueues.html#queueMenubarIcon">queueMenubarIcon</a></a></li><li class="sub-nav-item setQueueSizesTimer"><a href="AppBackground.modules.ModuleQueues.html#setQueueSizesTimer">setQueueSizesTimer</a></a></li><li class="sub-nav-item toString"><a href="AppBackground.modules.ModuleQueues.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleSettings.html">ModuleSettings</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleSettings_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleSettings.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _watchers"><a href="AppBackground.modules.ModuleSettings.html#_watchers">_watchers</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleUI.html">ModuleUI</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleUI_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __menubarAnimation"><a href="AppBackground.modules.ModuleUI.html#__menubarAnimation">__menubarAnimation</a></a></li><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleUI.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _restoreState"><a href="AppBackground.modules.ModuleUI.html#_restoreState">_restoreState</a></a></li><li class="sub-nav-item _watchers"><a href="AppBackground.modules.ModuleUI.html#_watchers">_watchers</a></a></li><li class="sub-nav-item notification"><a href="AppBackground.modules.ModuleUI.html#notification">notification</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="AppBackground.modules.ModuleUser.html">ModuleUser</a>
                <div class="nav-item-sub hidden" id="AppBackground_modules_ModuleUser_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _initialState"><a href="AppBackground.modules.ModuleUser.html#_initialState">_initialState</a></a></li><li class="sub-nav-item _platformData"><a href="AppBackground.modules.ModuleUser.html#_platformData">_platformData</a></a></li><li class="sub-nav-item login"><a href="AppBackground.modules.ModuleUser.html#login">login</a></a></li><li class="sub-nav-item logout"><a href="AppBackground.modules.ModuleUser.html#logout">logout</a></a></li><li class="sub-nav-item toString"><a href="AppBackground.modules.ModuleUser.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleContacts-Presence.html">Presence</a>
                <div class="nav-item-sub hidden" id="module_ModuleContacts_Presence_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-ModuleContacts-PresenceSip.html">PresenceSip</a>
                <div class="nav-item-sub hidden" id="module_ModuleContacts_PresenceSip_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item _statusFromDialog"><a href="module-ModuleContacts-PresenceSip.html#_statusFromDialog">_statusFromDialog</a></a></li><li class="sub-nav-item subscribe"><a href="module-ModuleContacts-PresenceSip.html#subscribe">subscribe</a></a></li><li class="sub-nav-item unsubscribe"><a href="module-ModuleContacts-PresenceSip.html#unsubscribe">unsubscribe</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-Sounds-RingTone.html">RingTone</a>
                <div class="nav-item-sub hidden" id="module_Sounds_RingTone_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="module-Sounds-RingbackTone.html">RingbackTone</a>
                <div class="nav-item-sub hidden" id="module_Sounds_RingbackTone_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="app.Skeleton.html">Skeleton</a>
                <div class="nav-item-sub hidden" id="app_Skeleton_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item emit"><a href="app.Skeleton.html#emit">emit</a></a></li><li class="sub-nav-item ipcListener"><a href="app.Skeleton.html#ipcListener">ipcListener</a></a></li><li class="sub-nav-item on"><a href="app.Skeleton.html#on">on</a></a></li><li class="sub-nav-item toString"><a href="app.Skeleton.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Sounds.SoundMeter.html">SoundMeter</a>
                <div class="nav-item-sub hidden" id="Sounds_SoundMeter_sub"></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Store.html">Store</a>
                <div class="nav-item-sub hidden" id="Store_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item clear"><a href="Store.html#clear">clear</a></a></li><li class="sub-nav-item toString"><a href="Store.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="app.modules.extension.Tabs.html">Tabs</a>
                <div class="nav-item-sub hidden" id="app_modules_extension_Tabs_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item contextMenuItems"><a href="app.modules.extension.Tabs.html#contextMenuItems">contextMenuItems</a></a></li><li class="sub-nav-item signalIcons"><a href="app.modules.extension.Tabs.html#signalIcons">signalIcons</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Telemetry.html">Telemetry</a>
                <div class="nav-item-sub hidden" id="Telemetry_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item event"><a href="Telemetry.html#event">event</a></a></li><li class="sub-nav-item getClientId"><a href="Telemetry.html#getClientId">getClientId</a></a></li><li class="sub-nav-item toString"><a href="Telemetry.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="Timer.html">Timer</a>
                <div class="nav-item-sub hidden" id="Timer_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item __jitter"><a href="Timer.html#__jitter">__jitter</a></a></li><li class="sub-nav-item increaseTimeout"><a href="Timer.html#increaseTimeout">increaseTimeout</a></a></li><li class="sub-nav-item setTimeout"><a href="Timer.html#setTimeout">setTimeout</a></a></li><li class="sub-nav-item toString"><a href="Timer.html#toString">toString</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="App.Utils.html">Utils</a>
                <div class="nav-item-sub hidden" id="App_Utils_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item sanitizeNumber"><a href="App.Utils.html#sanitizeNumber">sanitizeNumber</a></a></li><li class="sub-nav-item stringifySearch"><a href="App.Utils.html#stringifySearch">stringifySearch</a></a></li></ul></div>
            </li><li class="nav-item">
                <span class="toggle-subnav invisible btn btn-link fa fa-plus"></span>
                <a href="tab.Walker.html">Walker</a>
                <div class="nav-item-sub hidden" id="tab_Walker_sub"><div class="member-type">Methods</div><ul class="inner"><li class="sub-nav-item getBlockedRoles"><a href="tab.Walker.html#getBlockedRoles">getBlockedRoles</a></a></li><li class="sub-nav-item getBlockedTagNames"><a href="tab.Walker.html#getBlockedTagNames">getBlockedTagNames</a></a></li><li class="sub-nav-item isBlockedElement"><a href="tab.Walker.html#isBlockedElement">isBlockedElement</a></a></li><li class="sub-nav-item skipNode"><a href="tab.Walker.html#skipNode">skipNode</a></a></li><li class="sub-nav-item walkTheDOM"><a href="tab.Walker.html#walkTheDOM">walkTheDOM</a></a></li></ul></div>
            </li></ul></div></div>
        </div>
    </nav>

    <div class="content-container">
        <div class="content">
            <ul class="breadcrumbs">
                <li><a href="index.html">Docs</a> Â»</li>
                <li>Source: src/js/observer/parsers/dutch.js</li>
            </ul>
            <hr>
            



    
<article>
    <pre class="prettyprint source linenums"><code>/* eslint-disable */

// Do not match numbers which are probably part of an IBAN.
// Source: http://www.betaalvereniging.nl/europees-betalen/sepa-documentatie/bic-afleiden-uit-iban/
// codes origin:
const BICCODES = [
    'ABNA', 'FTSB', 'AEGO', 'ANAA', 'ANDL', 'ARBN', 'ARSN', 'ARTE',
    'ASNB', 'ASRB', 'ATBA', 'BBRU', 'BCDM', 'BCIT', 'BICK', 'BKCH',
    'BKMG', 'BLGW', 'BMEU', 'BNGH', 'BNPA', 'BOFA', 'BOFS', 'BOTK',
    'CHAS', 'CITC', 'CITI', 'COBA', 'DEUT', 'DHBN', 'DLBK', 'DNIB',
    'FBHL', 'FLOR', 'FRBK', 'FRGH', 'FVLB', 'GILL', 'HAND', 'HHBA',
    'HSBC', 'ICBK', 'INGB', 'INSI', 'ISBK', 'KABA', 'KASA', 'KNAB',
    'KOEX', 'KRED', 'LOCY', 'LOYD', 'LPLN', 'MHCB', 'NNBA', 'NWAB',
    'OVBN', 'RABO', 'RBOS', 'RBRB', 'SNSB', 'SOGE', 'STAL', 'TEBU',
    'TRIO', 'UBSW', 'UGBI', 'VOWA', 'ZWLB',
]


/**
 * Scan data for phone numbers matching the dutch format
 * and return the node in the DOM.
 */
module.exports = function() {
    let matches
    let input
    let buffer
    let result
    let result_raw
    let pos = 0
    let peekpos = 0
    let start = -1

    let whitespace = '[\\xA0\\x20\\t]'
    let nbsp = '(?:&amp;nbsp;)'
    let nextline = '[\\r\\n\\f]'

    // functions which process `buffer`
    let actions = {
        ignore: function() {
            buffer = ''
            return false
        },
        keep: function(kept) {
            if (start == -1) {
                // Starting anew
                result_raw = ''

                let posInFront = pos - (1 + kept.length)
                let charsInFront = input.substring(posInFront, (posInFront + 1))
                if (!charsInFront.trim().length) {
                    // Extend charsInFront if it's just a space.
                    posInFront -= 1
                    charsInFront = input.substring(posInFront, (pos - 2)) + charsInFront
                }

                // Shift behindpos if &amp;nbsp; is adjacent.
                if (charsInFront.trim() == ';' &amp;&amp; input.substring((posInFront - 5), (posInFront + 1)) == '&amp;nbsp;') {
                    posInFront -= 6
                    charsInFront = input[posInFront] || ''

                    if (!charsInFront.trim().length) {
                        // extend charsInFront if it's just a space
                        posInFront -= 1
                        charsInFront = input.substring(posInFront, (posInFront + 1)) + charsInFront
                    }
                }

                // Perform a few checks to see if we're starting mid-string
                // or if we're "isolated".
                let ignore = false

                // test if we're starting mid-string and allow some cases
                if (charsInFront.length &amp;&amp; !(new RegExp(whitespace + '|' + nextline + '|[(,\'"]|[^\\d+]').test(charsInFront))) {
                    if (charsInFront.slice(-1) == ';') {
                        // allow `;` as long there is not an isolated `f` or `fax` in front of it
                        if (
                            input.substring((posInFront - 2), (posInFront + 1)).toLowerCase().trim() == 'f;' ||
                            input.substring((posInFront - 4), (posInFront + 1)).toLowerCase().trim() == 'fax;'
                        ) {
                            ignore = true
                        }
                    } else if (charsInFront.slice(-1) == '.') {
                        // allow `.` as long there is not an isolated `f` or `fax` in front of it
                        if (input.substring((posInFront - 2), (posInFront + 1)).toLowerCase().trim() == 'f.' ||
                                input.substring((posInFront - 4), (posInFront + 1)).toLowerCase().trim() == 'fax.') {
                            ignore = true
                        } else if (new RegExp('\\d+').test(input.substring((posInFront - 2), posInFront))) {
                            ignore = true
                        }
                    } else if(charsInFront.slice(-1) == ':') {
                        // Allow `:` as long there is not an isolated `f` or `fax` in front of it.
                        if(input.substring((posInFront - 2), (posInFront + 1)).toLowerCase().trim() == 'f:' ||
                                input.substring((posInFront - 4), (posInFront + 1)).toLowerCase().trim() == 'fax:') {
                            ignore = true
                        }
                    } else {
                        if(input.substring((posInFront - 1), (posInFront + 1)).trim().toLowerCase() == 'f' ||
                                input.substring((posInFront - 3), (posInFront + 1)).trim().toLowerCase() == 'fax') {
                            ignore = true
                        } else if (new RegExp('\\d+').test(charsInFront)) {
                            ignore = true
                        }
                    }
                } else {
                    if (kept == '0') {
                        // Prevent matching START on the `0` in `F. +31(0) xxx`.
                        if (input.substring((posInFront - 1), (posInFront + 1)).slice(-1) == '(' &amp;&amp;
                                input.substring((posInFront + 2), (posInFront + 4)).slice(0, 1) == ')') {
                            ignore = true
                        } else if(charsInFront.trim().length) {
                            if (input.substring((posInFront + 1), (posInFront + 2)) != ' ' &amp;&amp; input.substring((posInFront + 1), (posInFront + 7)) != '&amp;nbsp;') {
                                if (new RegExp('[a-zA-Z]').test(input.substring(posInFront, (posInFront + 2)))) {
                                    ignore = true
                                }
                            }
                        }
                    }
                }

                if(!ignore) {
                    charsInFront = charsInFront.trim()

                    // Test if we're starting mid-sentence and ignore in some cases
                    // has some significant similarities with the code above, but slightly different!!
                    if (charsInFront.length &amp;&amp; !(new RegExp(whitespace + '|' + nextline + '|[(,\'"]').test(charsInFront))) {
                        if (charsInFront.slice(-1) == ';') {
                            // Allow `;` as long there is not an isolated `f` or `fax` in front of it.
                            if (
                                input.substring((posInFront - 2), (posInFront + 1)).toLowerCase().trim() == 'f;' ||
                                input.substring((posInFront - 4), (posInFront + 1)).toLowerCase().trim() == 'fax;'
                            ) {
                                ignore = true
                            }
                        } else if (charsInFront.slice(-1) == '.') {
                            // allow `.` as long there is not an isolated `f` or `fax` in front of it
                            if (
                                input.substring((posInFront - 2), (posInFront + 1)).toLowerCase().trim() == 'f.' ||
                                input.substring((posInFront - 4), (posInFront + 1)).toLowerCase().trim() == 'fax.'
                            ) {
                                ignore = true
                            } else if (new RegExp('\\d+').test(input.substring((posInFront - 2), (posInFront)))) {
                                ignore = true
                            }
                        } else if(charsInFront.slice(-1) == ':') {
                            // allow `:` as long there is not an isolated `f` or `fax` in front of it
                            if (
                                input.substring((posInFront - 2), (posInFront + 1)).toLowerCase().trim() == 'f:' ||
                                input.substring((posInFront - 4), (posInFront + 1)).toLowerCase().trim() == 'fax:'
                            ) {
                                ignore = true
                            }
                        } else {
                            if (
                                input.substring((posInFront - 1), (posInFront + 1)).trim().toLowerCase() == 'f' ||
                                input.substring((posInFront - 3), (posInFront + 1)).trim().toLowerCase() == 'fax'
                            ) {
                                ignore = true
                            } else {
                                if (BICCODES.includes(input.substring((posInFront - 3), (posInFront + 1)).toUpperCase())) {
                                    ignore = true
                                }
                            }
                        }
                    } else {
                        if (kept == '0') {
                            // prevent matching START on the 0 in `F. &amp;nbsp;+31(0) xxx`
                            if (input.substring((posInFront - 1), (posInFront + 1)).slice(-1) == '(' &amp;&amp;
                                    input.substring((posInFront + 2), (posInFront + 4)).slice(0, 1) == ')') {
                                ignore = true
                            }
                        }
                    }
                }

                if (ignore) return actions.ignore()
                start = (pos - 1)
            }

            // not all dashes look the same
            if (new RegExp(rules[12].pattern).test(kept)) {
                // do `actions.end()` when encountering a second `-`
                if (result.search(rules[12].pattern) !== -1) {
                    return actions.end(buffer)
                }

                kept = '-'
            }

            result += kept
            buffer = ''

            return true
        },
        end: function(kept) {
            if(kept) {
                // discard whatever it is triggered the end
                pos -= kept.length
                buffer = buffer.slice(-kept.length)
            }

            let valid = false

            // only bother validating when a start position is marked
            if(start > -1) {
                valid = validate(result)
                if(valid) {
                    matches.push({
                        start: start,
                        end: pos,
                        number: result.replace(new RegExp('[^\\d+]', 'g'), ''),
                    })
                    actions.reset()
                } else {
                    actions.reset()
                }
            }

            start = -1
        },
        end_or_ignore: function(kept) {
            // discard whatever it is triggered the end
            pos -= kept.length
            buffer = buffer.slice(-kept.length)
            let startbuffer = buffer
            // See if result so far is valid.
            let valid = validate(result)

            // at this point, look if a new match could be found up ahead
            let startRules = rulesMap['START']
            let ruleMatched = false

            for (let i = 0; i &lt; startRules.length; i++) {
                let rule = rules[startRules[i]]

                // Add to buffer.
                peekpos = pos
                buffer = peek(1)

                // test buffer until
                // - pattern matches, or
                // - buffer length exceeds rule length
                for(let j = 0 ; j &lt; rule.length &amp;&amp; (buffer.length == (j+1)); j++) {
                    if (new RegExp(rule.pattern).test(buffer)) {
                        ruleMatched = true
                        break
                    } else {
                        // Increase buffer.
                        buffer += peek(1)
                    }
                }

                if (ruleMatched) {
                    // A new match can be found ahead, end here.
                    // Do no pass `kept` to prevent repeating discarding it.
                    if (valid) actions.end()
                    else actions.reset()
                    break
                }
            }

            // undo changes we made
            pos += kept.length
            peekpos = pos
            buffer = startbuffer
        },
        reset: function(kept) {
            // Re-evaluate from the same position with initial state.
            peekpos = pos
            // Clear whatever.
            state.reset()
            buffer = ''
            result = ''
            result_raw = ''
            start = -1
        },
    }

    let state = function() {
        // states used are:
        // - START
        // - INTERNATIONAL
        // - AREA
        // - LINE
        let states = []

        let set = function(state) {
            if (current() != state) {
                states.push(state)
            }
        }

        let replace = function(state) {
            if (replace === true) states.pop()
            set(state)
        }

        let reset = function() {
            while (states.length > 1) {
                states.pop()
            }
        }

        let current = function() {
            return states[states.length - 1]
        }

        return {
            set: set,
            replace: replace,
            reset: reset,
            current: current,

            print: function() {
                console.log(states)
            },
        }
    }()

    let rules = []
    rules[0] = {
        pattern: '[^\\d]', action: actions.reset, length: 1,
    }
    rules[1] = {
        pattern: nextline, action: actions.end, length: 1,
    }
    rules[13] = {
        pattern: '^\\b|' + whitespace + nextline + '|' + nbsp + '|$', action: actions.end, length: 6,
    }

    //////////////////////
    // starting characters
    //////////////////////

    // international notation
    rules[2] = {
        pattern: '(^|\\b[\\p{P}|' + whitespace + '|' + nextline + '])\\+',
        filter: '[^\\+]',
        action: actions.keep, length: 3,
        state: 'INTERNATIONAL',
    }
    rules[3] = {
        pattern: '(^|\\b[\\p{P}|' + whitespace + '|' + nextline + '])00',
        action: actions.keep, length: 2,
        state: 'INTERNATIONAL',
    }
    rules[4] = {
        pattern: '^31',
        action: actions.keep, length: 2,
        state: 'AREA',
    }

    // Optional `(0)` behind international notation.
    rules[5] = {
        pattern: '^(\\((' + whitespace + '|' + nbsp + ')?0(' + whitespace + '|' + nbsp + ')?\\))',
        action: actions.ignore, length: 15,
        state: 'AREA',
    }

    // national notation
    rules[6] = {
        pattern: '(^|\\b[\\p{P}|' + whitespace + '|' + nextline + '])0',
        action: actions.keep, length: 1,
        state: 'AREA',
    }

    // ordinary line number digits
    rules[7] = {
        pattern: '^[\\d]',
        action: actions.keep, length: 1,
        state: 'LINE',
    }

    /////////////////////
    // garbage characters
    /////////////////////

    // whitespace: error out on two next to each other
    rules[8] = {
        pattern: '^((' + whitespace + '|' + nbsp + ')){2}',
        action: actions.end, length: 7,
    }
    // whitespace: allow just one
    rules[9] = {
        pattern: '^((' + whitespace + '|' + nbsp + ')){1}',
        action: actions.end_or_ignore, length: 6,
    }
    // parenthesis: have at least 1 digit between them
    rules[10] = {
        pattern: '^(\\((' + whitespace + '|' + nbsp + ')?\\d{1,})',
        filter: '\\s',
        action: actions.keep, length: 8,
    }
    rules[11] = {
        pattern: '^((' + whitespace + '|' + nbsp + ')?\\d{1,}\\)',
        filter: '\\s',
        action: actions.keep, length: 8,
    }
    // hyphen
    rules[12] = {
        pattern: '[-\u2012-\u2015]',
        action: actions.keep, length: 1,
    }

    let rulesMap = {
        'START': [2, 3, 6],
        'INTERNATIONAL': [4],
        'AREA': [7, 12, 5],
        'LINE': [7, 1, 8, 9, 10, 12, 5, 13, 0],
    }

    /**
     * Lookahead using a separate pos-variable.
     */
    let peek = function(size) {
        peekpos += size
        return input.substring(peekpos - size, peekpos)
    }

    /**
     * Find phone number matches in `text`.
     */
    let parse = function(text) {
        matches = []
        // Very crude, but fast, early fails:

        // 1) we need at least 8 digits
        let digits = text.match(/\d/g)
        if (digits === null || digits.length &lt; 8) {
            return matches
        }

        // 2) if it looks like a decimal, ignore it
        if (new RegExp(/\d+[\.,]\d+/g).test(text)) {
            return matches
        }

        // 3) we need at least two consecutive digits!
        if (!new RegExp(/\d{2,}/g).test(text)) {
            return matches
        }

        // 4) we need at least 7 digits behind a '0'
        // OR
        // 5) we need at least 7 digits behind a '31'
        if (digits) {
            let num_behind_0 = -1
            for (let i = 0; i &lt; digits.length &amp;&amp; num_behind_0 &lt; 8; i++) {
                if (digits[i] === '0' &amp;&amp; num_behind_0 === -1) {
                    num_behind_0++
                }
                if (num_behind_0 !== -1) {
                    num_behind_0++
                }
            }
            let num_behind_31 = -1
            for (let j = 0; j &lt; digits.length - 1 &amp;&amp; num_behind_31 &lt; 8; j++) {
                if (digits[j] === '3' &amp;&amp; digits[j + 1] === '1' &amp;&amp; num_behind_31 === -1) {
                    num_behind_31++
                }
                if (num_behind_31 !== -1) {
                    num_behind_31++
                }
            }
            if (num_behind_0 &lt; 8 &amp;&amp; num_behind_31 &lt; 8) {
                return matches
            }
        }

        input = text
        result = result_raw = buffer = ''
        state.set('START')

        for (; pos &lt; input.length;) {
            let startpos = pos
            // Test rules applicable for current state.
            let stateRules = rulesMap[state.current()]
            let ruleMatched = false

            for (let i = 0; i &lt; stateRules.length; i++) {
                let rule = rules[stateRules[i]]
                // Add to buffer.
                peekpos = pos
                buffer = peek(1)

                // test buffer until
                // - pattern matches, or
                // - buffer length exceeds rule length
                for (let j = 0; j &lt; rule.length &amp;&amp; (buffer.length == (j+1)); j++) {
                    if (new RegExp(rule.pattern).test(buffer)) {
                        pos = peekpos
                        ruleMatched = true
                        break
                    } else {
                        // Increase buffer.
                        buffer += peek(1)
                    }
                }

                if (ruleMatched) {
                    // Shift pos.
                    pos = peekpos

                    // Take action for buffer.
                    let kept = buffer
                    if (rule.filter !== undefined) {
                        kept = kept.replace(new RegExp(rule.filter, 'g'), '')
                    }
                    let switchState = rule.action(kept)
                    // Clear buffer.
                    buffer = ''

                    // change state if the rule has a new rule
                    if (rule.state !== undefined) {
                        if (switchState) state.set(rule.state)
                    }

                    // break to start over testing every rule in order
                    break
                }
            }

            // Make sure to keep progressing if possible
            if (pos == startpos) {
                pos++
            }
            // Because a skip can happen, keep track of everything for
            // proper validation later on
            result_raw += input.substring(startpos, pos)
        }

        // Validate whatever is in the buffer after finished looping.
        pos = peekpos
        actions.end(buffer)
        return matches
    }

    // Validate result. Result is guaranteed to have no whitespace, which makes life easy.
    let validate = function() {
        let matches = new RegExp('^(?:(?:(?:\\+|00)31)|0)(.*)').exec(result)
        if (!matches) {
            // The number...
            // - doesn't start with `((+|00)31|0)`, or
            // - has no trailing characters, or
            // - has no trailing digits
            return false
        }

        // Sanity check: are there any unwanted characters we kept because of skipping ?
        const tag = document.createElement('span')
        tag.innerHTML = result_raw
        let justText = tag.innerText

        // Find first digit
        let pos_digit = justText.search(/\d/g)
        if (pos_digit != -1) {
            // Validate justText from pos_digit because prefixes
            // are already validated.
            justText = justText.substring(pos_digit)
        }
        if (new RegExp('[^\\+\\d\\(\\)\\-(\\xA0\\x20\\t)]').test(justText)) {
            return false
        }

        // Everything behind `((+|00)31|0)`
        let line_number = matches[1]
        // Just the digits behind `((+|00)31|0)`.
        let just_digits = line_number.replace(new RegExp('[^\\d]', 'g'), '')

        // Numbers with `097` are not callable numbers, but used for machine-to-machine.
        if (new RegExp('^97').test(just_digits.substring(0, 3))) {
            return false
        }

        // There shouldn't be a `00` in the area code: `+31005xxxxxx` or `+31500xxxxxx`
        // but allow `0800`, `0900`
        if (new RegExp('^00|[^89]00').test(just_digits.substring(0, 3))) {
            return false
        }

        // Check for characters other than `(`, `)`, `-`
        if(new RegExp('[^\\d\\-\\(\\)]').test(line_number)) {
            return false
        }

        // A single hyphen is only allowed on a few positions
        let hyphens = []
        for (let i = 0; i &lt; line_number.length &amp;&amp; hyphens.length &lt; 2; i++) {
            if (line_number[i] == '-') {
                hyphens.push(i)
            }
        }
        if (hyphens.length == 1) {
            if (hyphens[0] &lt; 1 || hyphens[0] > 3) {
                return false
            }
        } else if(hyphens.length == 2) {
            return false
        }

        // Check for bad parentheses.
        let nesting = 0
        for (let j = 0; j &lt; result.length; j++) {
            let c = result.charAt(j)
            if (c == '(') {
                nesting++
            } else if (c == ')') {
                nesting--
            }
        }
        if (nesting !== 0) return false

        // More than one length can be valid if result is a service number.
        if (just_digits.substring(0, 1) == '8') {
            if (just_digits.substring(0, 3) == '800') {
                return just_digits.length == 7 || just_digits.length == 10
            } else if (!new RegExp('^8([24578]|00)').test(just_digits)) {
                // 08x service number must be `08([24578]|00)`
                return false
            }
        } else if (just_digits.substring(0, 1) == '9') {
            if (new RegExp('^9(00|06|09)').test(just_digits)) {
                return just_digits.length == 7 || just_digits.length == 10
            } else if (!new RegExp('^91').test(just_digits)) {
                // 09x service number must be `09(1|00|06|09)`
                return false
            }
        }

        return just_digits.length == 9
    }

    let isBlockingNode = function(node) {
        let blocking = false
        if (node) {
            let text = node.textContent.trim().toLowerCase()
            if (text == 'fax' || text == 'fax.' || text == 'fax:' ||  text == 'f' || text == 'f.' || text == 'f:') {
                blocking = true
            }
        }

        return blocking
    }

    // exposed functions
    return {
        parse: parse,
        isBlockingNode: isBlockingNode,
    }
}
</code></pre>
</article>





            <hr>
            <footer>
                <strong>&copy; Devhouse Spindle</strong><br/>
                Documented with <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
            </footer>
        </div>
        <div class="flex-filler"></div>
    </div>


<script src="js/jquery.min.js"></script>
<script>

window.isApi = true
window.isManual = false
window.doc = {
    name: '',
    longname: '',
}

if (!doc.name) isApi = false

</script>
<script src="js/rtd.js"></script>
</body>
</html>
